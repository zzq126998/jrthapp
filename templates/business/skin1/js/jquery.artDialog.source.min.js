/*!
 * artDialog 4.1.7
 * Date: 2013-03-03 08:04
 * http://code.google.com/p/artdialog/
 * (c) 2009-2012 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://creativecommons.org/licenses/LGPL/2.1/
 */
(function(G,z,E){G.noop=G.noop||function(){};var x,I,B,H,t=0,e=G(z),D=G(document),F=G("html"),y=document.documentElement,J=z.VBArray&&!z.XMLHttpRequest,v="createTouch" in document&&!("onmousemove" in y)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),w="artDialog"+ +new Date;var A=function(g,d,a){g=g||{};if(typeof g==="string"||g.nodeType===1){g={content:g,fixed:!v}}var c,h=A.defaults,b=g.follow=this.nodeType===1&&this||g.follow;for(var f in h){if(g[f]===E){g[f]=h[f]}}G.each({ok:"yesFn",cancel:"noFn",close:"closeFn",init:"initFn",okVal:"yesText",cancelVal:"noText"},function(j,i){g[j]=g[j]!==E?g[j]:g[i]});if(typeof b==="string"){b=G(b)[0]}g.id=b&&b[w+"follow"]||g.id||w+t;c=A.list[g.id];if(b&&c){return c.follow(b).zIndex().focus()}if(c){return c.zIndex().focus()}if(v){g.fixed=false}if(!G.isArray(g.button)){g.button=g.button?[g.button]:[]}if(d!==E){g.ok=d}if(a!==E){g.cancel=a}g.ok&&g.button.push({name:g.okVal,callback:g.ok,focus:true});g.cancel&&g.button.push({name:g.cancelVal,callback:g.cancel});A.defaults.zIndex=g.zIndex;t++;return A.list[g.id]=x?x._init(g):new A.fn._init(g)};A.fn=A.prototype={version:"4.1.7",closed:true,_init:function(f){var b=this,c,d=f.icon,a=d&&(J?{png:"icons/"+d+".png"}:{backgroundImage:"url('"+f.path+"/skins/icons/"+d+".png')"});b.closed=false;b.config=f;b.DOM=c=b.DOM||b._getDOM();c.wrap.addClass(f.skin);c.close[f.cancel===false?"hide":"show"]();c.icon[0].style.display=d?"":"none";c.iconBg.css(a||{background:"none"});c.se.css("cursor",f.resize?"se-resize":"auto");c.title.css("cursor",f.drag?"move":"auto");c.content.css("padding",f.padding);b[f.show?"show":"hide"](true);b.button(f.button).title(f.title).content(f.content,true).size(f.width,f.height).time(f.time);f.follow?b.follow(f.follow):b.position(f.left,f.top);b.zIndex().focus();f.lock&&b.lock();b._addEvent();b._ie6PngFix();x=null;f.init&&f.init.call(b,z);return b},content:function(k){var i,h,p,c,g=this,l=g.DOM,m=l.wrap[0],o=m.offsetWidth,n=m.offsetHeight,j=parseInt(m.style.left),b=parseInt(m.style.top),a=m.style.width,f=l.content,d=f[0];g._elemBack&&g._elemBack();m.style.width="auto";if(k===E){return d}if(typeof k==="string"){f.html(k)}else{if(k&&k.nodeType===1){c=k.style.display;i=k.previousSibling;h=k.nextSibling;p=k.parentNode;g._elemBack=function(){if(i&&i.parentNode){i.parentNode.insertBefore(k,i.nextSibling)}else{if(h&&h.parentNode){h.parentNode.insertBefore(k,h)}else{if(p){p.appendChild(k)}}}k.style.display=c;g._elemBack=null};f.html("");d.appendChild(k);k.style.display="block"}}if(!arguments[1]){if(g.config.follow){g.follow(g.config.follow)}else{o=m.offsetWidth-o;n=m.offsetHeight-n;j=j-o/2;b=b-n/2;m.style.left=Math.max(j,0)+"px";m.style.top=Math.max(b,0)+"px"}if(a&&a!=="auto"){m.style.width=m.offsetWidth+"px"}g._autoPositionType()}g._ie6SelectFix();g._runScript(d);return g},title:function(a){var c=this.DOM,d=c.wrap,b=c.title,f="aui_state_noTitle";if(a===E){return b[0]}if(a===false){b.hide().html("");d.addClass(f)}else{b.show().html(a||"");d.removeClass(f)}return this},position:function(g,p){var q=this,i=q.config,n=q.DOM.wrap[0],d=J?false:i.fixed,a=J&&q.config.fixed,h=D.scrollLeft(),l=D.scrollTop(),b=d?0:h,k=d?0:l,c=e.width(),o=e.height(),j=n.offsetWidth,m=n.offsetHeight,f=n.style;if(g||g===0){q._left=g.toString().indexOf("%")!==-1?g:null;g=q._toNumber(g,c-j);if(typeof g==="number"){g=a?(g+=h):g+b;f.left=Math.max(g,b)+"px"}else{if(typeof g==="string"){f.left=g}}}if(p||p===0){q._top=p.toString().indexOf("%")!==-1?p:null;p=q._toNumber(p,o-m);if(typeof p==="number"){p=a?(p+=l):p+k;f.top=Math.max(p,k)+"px"}else{if(typeof p==="string"){f.top=p}}}if(g!==E&&p!==E){q._follow=null;q._autoPositionType()}return q},size:function(k,b){var d,c,f,n,h=this,j=h.config,a=h.DOM,l=a.wrap,i=a.main,g=l[0].style,m=i[0].style;if(k){h._width=k.toString().indexOf("%")!==-1?k:null;d=e.width()-l[0].offsetWidth+i[0].offsetWidth;f=h._toNumber(k,d);k=f;if(typeof k==="number"){g.width="auto";m.width=Math.max(h.config.minWidth,k)+"px";g.width=l[0].offsetWidth+"px"}else{if(typeof k==="string"){m.width=k;k==="auto"&&l.css("width","auto")}}}if(b){h._height=b.toString().indexOf("%")!==-1?b:null;c=e.height()-l[0].offsetHeight+i[0].offsetHeight;n=h._toNumber(b,c);b=n;if(typeof b==="number"){m.height=Math.max(h.config.minHeight,b)+"px"}else{if(typeof b==="string"){m.height=b}}}h._ie6SelectFix();return h},follow:function(b){var T,R=this,a=R.config;if(typeof b==="string"||b&&b.nodeType===1){T=G(b);b=T[0]}if(!b||!b.offsetWidth&&!b.offsetHeight){return R.position(R._left,R._top)}var g=w+"follow",s=e.width(),q=e.height(),m=D.scrollLeft(),i=D.scrollTop(),k=T.offset(),h=b.offsetWidth,j=b.offsetHeight,S=J?false:a.fixed,o=S?k.left-m:k.left,n=S?k.top-i:k.top,Q=R.DOM.wrap[0],c=Q.style,r=Q.offsetWidth,d=Q.offsetHeight,P=o-(r-h)/2,l=n+j,f=S?0:m,p=S?0:i;P=P<f?o:(P+r>s)&&(o-r>f)?o-r+h:P;l=(l+d>q+p)&&(n-d>p)?n-d:l;c.left=P+"px";c.top=l+"px";R._follow&&R._follow.removeAttribute(g);R._follow=b;b[g]=a.id;R._autoPositionType();return R},button:function(){var a=this,h=arguments,b=a.DOM,c=b.buttons,d=c[0],f="aui_state_highlight",g=a._listeners=a._listeners||{},i=G.isArray(h[0])?h[0]:[].slice.call(h);if(h[0]===E){return d}G.each(i,function(m,k){var j=k.name,l=!g[j],n=!l?g[j].elem:document.createElement("button");if(!g[j]){g[j]={}}if(k.callback){g[j].callback=k.callback}if(k.className){n.className=k.className}if(k.focus){a._focus&&a._focus.removeClass(f);a._focus=G(n).addClass(f);a.focus()}n.setAttribute("type","button");n[w+"callback"]=j;n.disabled=!!k.disabled;if(l){n.innerHTML=j;g[j].elem=n;d.appendChild(n)}});c[0].style.display=i.length?"":"none";a._ie6SelectFix();return a},show:function(){this.DOM.wrap.show();!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.show();return this},hide:function(){this.DOM.wrap.hide();!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.hide();return this},close:function(){if(this.closed){return this}var a=this,b=a.DOM,c=b.wrap,h=A.list,d=a.config.close,g=a.config.follow;a.time();if(typeof d==="function"&&d.call(a,z)===false){return a}a.unlock();a._elemBack&&a._elemBack();c[0].className=c[0].style.cssText="";b.title.html("");b.content.html("");b.buttons.html("");if(A.focus===a){A.focus=null}if(g){g.removeAttribute(w+"follow")}delete h[a.config.id];a._removeEvent();a.hide(true)._setAbsolute();for(var f in a){if(a.hasOwnProperty(f)&&f!=="DOM"){delete a[f]}}x?c.remove():x=a;return a},time:function(d){var b=this,c=b.config.cancelVal,a=b._timer;a&&clearTimeout(a);if(d){b._timer=setTimeout(function(){b._click(c)},1000*d)}return b},focus:function(){try{if(this.config.focus){var b=this._focus&&this._focus[0]||this.DOM.close[0];b&&b.focus()}}catch(a){}return this},zIndex:function(){var b=this,c=b.DOM,d=c.wrap,a=A.focus,f=A.defaults.zIndex++;d.css("zIndex",f);b._lockMask&&b._lockMask.css("zIndex",f-1);a&&a.DOM.wrap.removeClass("aui_state_focus");A.focus=b;d.addClass("aui_state_focus");return b},lock:function(){if(this._lock){return this}var h=this,g=A.defaults.zIndex-1,k=h.DOM.wrap,i=h.config,f=D.width(),a=D.height(),c=h._lockMaskWrap||G(document.body.appendChild(document.createElement("div"))),j=h._lockMask||G(c[0].appendChild(document.createElement("div"))),l="(document).documentElement",d=v?"width:"+f+"px;height:"+a+"px":"width:100%;height:100%",b=J?"position:absolute;left:expression("+l+".scrollLeft);top:expression("+l+".scrollTop);width:expression("+l+".clientWidth);height:expression("+l+".clientHeight)":"";h.zIndex();k.addClass("aui_state_lock");c[0].style.cssText=d+";position:fixed;z-index:"+g+";top:0;left:0;overflow:hidden;"+b;j[0].style.cssText="height:100%;background:"+i.background+";filter:alpha(opacity=0);opacity:0";if(J){j.html('<iframe src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;filter:alpha(opacity=0)"></iframe>')}j.stop();j.bind("click",function(){h._reset()}).bind("dblclick",function(){h._click(h.config.cancelVal)});if(i.duration===0){j.css({opacity:i.opacity})}else{j.animate({opacity:i.opacity},i.duration)}h._lockMaskWrap=c;h._lockMask=j;h._lock=true;return h},unlock:function(){var a=this,c=a._lockMaskWrap,f=a._lockMask;if(!a._lock){return a}var b=c[0].style;var d=function(){if(J){b.removeExpression("width");b.removeExpression("height");b.removeExpression("left");b.removeExpression("top")}b.cssText="display:none";x&&c.remove()};f.stop().unbind();a.DOM.wrap.removeClass("aui_state_lock");if(!a.config.duration){d()}else{f.animate({opacity:0},a.config.duration,d)}a._lock=false;return a},_getDOM:function(){var a=document.createElement("div"),g=document.body;a.style.cssText="position:absolute;left:0;top:0";a.innerHTML=A._templates;g.insertBefore(a,g.firstChild);var d,b=0,h={wrap:G(a)},c=a.getElementsByTagName("*"),f=c.length;for(;b<f;b++){d=c[b].className.split("aui_")[1];if(d){h[d]=G(c[b])}}return h},_toNumber:function(c,a){if(!c&&c!==0||typeof c==="number"){return c}var b=c.length-1;if(c.lastIndexOf("px")===b){c=parseInt(c)}else{if(c.lastIndexOf("%")===b){c=parseInt(a*c.split("%")[0]/100)}}return c},_ie6PngFix:J?function(){var f=0,c,h,d,g,a=A.defaults.path+"/skins/",b=this.DOM.wrap[0].getElementsByTagName("*");for(;f<b.length;f++){c=b[f];h=c.currentStyle.png;if(h){d=a+h;g=c.runtimeStyle;g.backgroundImage="none";g.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d+"',sizingMethod='crop')"}}}:G.noop,_ie6SelectFix:J?function(){var f=this.DOM.wrap,b=f[0],a=w+"iframeMask",c=f[a],d=b.offsetWidth,g=b.offsetHeight;d=d+"px";g=g+"px";if(c){c.style.width=d;c.style.height=g}else{c=b.appendChild(document.createElement("iframe"));f[a]=c;c.src="about:blank";c.style.cssText="position:absolute;z-index:-1;left:0;top:0;filter:alpha(opacity=0);width:"+d+";height:"+g}}:G.noop,_runScript:function(a){var g,c=0,h=0,d=a.getElementsByTagName("script"),b=d.length,f=[];for(;c<b;c++){if(d[c].type==="text/dialog"){f[h]=d[c].innerHTML;h++}}if(f.length){f=f.join("");g=new Function(f);g.call(this)}},_autoPositionType:function(){this[this.config.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:(function(){J&&G(function(){var a="backgroundAttachment";if(F.css(a)!=="fixed"&&G("body").css(a)!=="fixed"){F.css({zoom:1,backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})}});return function(){var c=this.DOM.wrap,b=c[0].style;if(J){var h=parseInt(c.css("left")),a=parseInt(c.css("top")),d=D.scrollLeft(),f=D.scrollTop(),g="(document.documentElement)";this._setAbsolute();b.setExpression("left","eval("+g+".scrollLeft + "+(h-d)+') + "px"');b.setExpression("top","eval("+g+".scrollTop + "+(a-f)+') + "px"')}else{b.position="fixed"}}}()),_setAbsolute:function(){var a=this.DOM.wrap[0].style;if(J){a.removeExpression("left");a.removeExpression("top")}a.position="absolute"},_click:function(c){var a=this,b=a._listeners[c]&&a._listeners[c].callback;return typeof b!=="function"||b.call(a,z)!==false?a.close():a},_reset:function(d){var f,g=this,b=g._winSize||e.width()*e.height(),h=g._follow,j=g._width,a=g._height,i=g._left,c=g._top;if(d){f=g._winSize=e.width()*e.height();if(b===f){return}}if(j||a){g.size(j,a)}if(h){g.follow(h)}else{if(i||c){g.position(i,c)}}},_addEvent:function(){var f,a=this,d=a.config,c="CollectGarbage" in z,b=a.DOM;a._winResize=function(){f&&clearTimeout(f);f=setTimeout(function(){a._reset(c)},40)};e.bind("resize",a._winResize);b.wrap.bind("click",function(i){var h=i.target,g;if(h.disabled){return false}if(h===b.close[0]){a._click(d.cancelVal);return false}else{g=h[w+"callback"];g&&a._click(g)}a._ie6SelectFix()}).bind("mousedown",function(){a.zIndex()})},_removeEvent:function(){var a=this,b=a.DOM;b.wrap.unbind();e.unbind("resize",a._winResize)}};A.fn._init.prototype=A.fn;G.fn.dialog=G.fn.artDialog=function(){var a=arguments;this[this.live?"live":"bind"]("click",function(){A.apply(this,a);return false});return this};A.focus=null;A.get=function(a){return a===E?A.list:A.list[a]};A.list={};D.bind("keydown",function(d){var b=d.target,a=b.nodeName,g=/^INPUT|TEXTAREA$/,f=A.focus,c=d.keyCode;if(!f||!f.config.esc||g.test(a)){return}c===27&&f._click(f.config.cancelVal)});H=z._artDialog_path||(function(c,b,a){for(b in c){if(c[b].src&&c[b].src.indexOf("artDialog")!==-1){a=c[b]}}I=a||c[c.length-1];a=I.src.replace(/\\/g,"/");return a.lastIndexOf("/")<0?".":a.substring(0,a.lastIndexOf("/"))}(document.getElementsByTagName("script")));B=I.src.split("skin=")[1];if(B){var C=document.createElement("link");C.rel="stylesheet";C.href=H+"/skins/"+B+".css?"+A.fn.version;I.parentNode.insertBefore(C,I)}e.bind("load",function(){setTimeout(function(){if(t){return}A({left:"-9999em",time:9,fixed:false,lock:false,focus:false})},150)});try{document.execCommand("BackgroundImageCache",false,true)}catch(u){}A._templates='<div class="aui_outer"><table class="aui_border"><tbody><tr><td class="aui_nw"></td><td class="aui_n"></td><td class="aui_ne"></td></tr><tr><td class="aui_w"></td><td class="aui_c"><div class="aui_inner"><table class="aui_dialog"><tbody><tr><td colspan="2" class="aui_header"><div class="aui_titleBar"><div class="aui_title"></div><a class="aui_close" href="javascript:/*artDialog*/;">\xd7</a></div></td></tr><tr><td class="aui_icon"><div class="aui_iconBg"></div></td><td class="aui_main"><div class="aui_content"></div></td></tr><tr><td colspan="2" class="aui_footer"><div class="aui_buttons"></div></td></tr></tbody></table></div></td><td class="aui_e"></td></tr><tr><td class="aui_sw"></td><td class="aui_s"></td><td class="aui_se"></td></tr></tbody></table></div>';A.defaults={content:'<div class="aui_loading"><span>loading..</span></div>',title:"\u6d88\u606f",button:null,ok:null,cancel:null,init:null,close:null,okVal:"\u786E\u5B9A",cancelVal:"\u53D6\u6D88",width:"auto",height:"auto",minWidth:96,minHeight:32,skin:"",icon:null,time:null,esc:true,focus:true,show:true,follow:null,path:H,lock:false,background:"#000",opacity:0.5,duration:300,fixed:false,left:"50%",top:"38.2%",zIndex:1987,resize:true,drag:true};z.artDialog=G.dialog=G.artDialog=A}(this.art||this.jQuery&&(this.art=jQuery),this));(function(n){var k,q,r=n(window),o=n(document),j=document.documentElement,m=!("minWidth" in j.style),l="onlosecapture" in j,p="setCapture" in j;artDialog.dragEvent=function(){var a=this,b=function(d){var c=a[d];a[d]=function(){return c.apply(a,arguments)}};b("start");b("move");b("end")};artDialog.dragEvent.prototype={onstart:n.noop,start:function(a){o.bind("mousemove",this.move).bind("mouseup",this.end);this._sClientX=a.clientX;this._sClientY=a.clientY;this.onstart(a.clientX,a.clientY);return false},onmove:n.noop,move:function(a){this._mClientX=a.clientX;this._mClientY=a.clientY;this.onmove(a.clientX-this._sClientX,a.clientY-this._sClientY);return false},onend:n.noop,end:function(a){o.unbind("mousemove",this.move).unbind("mouseup",this.end);this.onend(a.clientX,a.clientY);return false}};q=function(i){var e,d,x,g,b,z,c=artDialog.focus,w=c.DOM,h=w.wrap,a=w.title,f=w.main;var y="getSelection" in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(s){}};k.onstart=function(s,t){if(z){d=f[0].offsetWidth;x=f[0].offsetHeight}else{g=h[0].offsetLeft;b=h[0].offsetTop}o.bind("dblclick",k.end);!m&&l?a.bind("losecapture",k.end):r.bind("blur",k.end);p&&a[0].setCapture();h.addClass("aui_state_drag");c.focus()};k.onmove=function(I,u){if(z){var H=h[0].style,J=f[0].style,s=I+d,t=u+x;H.width="auto";J.width=Math.max(0,s)+"px";H.width=h[0].offsetWidth+"px";J.height=Math.max(0,t)+"px"}else{var J=h[0].style,v=Math.max(e.minX,Math.min(e.maxX,I+g)),G=Math.max(e.minY,Math.min(e.maxY,u+b));J.left=v+"px";J.top=G+"px"}y();c._ie6SelectFix()};k.onend=function(s,t){o.unbind("dblclick",k.end);!m&&l?a.unbind("losecapture",k.end):r.unbind("blur",k.end);p&&a[0].releaseCapture();m&&!c.closed&&c._autoPositionType();h.removeClass("aui_state_drag")};z=i.target===w.se[0]?true:false;e=(function(){var I,J,G=c.DOM.wrap[0],t=G.style.position==="fixed",u=G.offsetWidth,K=G.offsetHeight,s=r.width(),H=r.height(),L=t?0:o.scrollLeft(),v=t?0:o.scrollTop(),I=s-u+L;J=H-K+v;return{minX:L,minY:v,maxX:I,maxY:J}})();k.start(i)};o.bind("mousedown",function(a){var c=artDialog.focus;if(!c){return}var e=a.target,d=c.config,b=c.DOM;if(d.drag!==false&&e===b.title[0]||d.resize!==false&&e===b.se[0]){k=k||new artDialog.dragEvent();q(a);return false}})})(this.art||this.jQuery&&(this.art=jQuery));