var pickuptime = {
	init: function(a, b) {
		this.setuptime = a;
		this.run(b)
	},
	marketgetTime: function() {
		var k = this.setuptime;
		var g = new Date();
		g.setDate(g.getDate() + k);
		var e = new Array();
		var b, j;
		for (var c = k; c < 6 + k; c++) {
			if (c == 0) {
				b = g.getMonth() + 1;
				j = g.getDate();
				e.push(b + "月" + j)
			} else if (c == 1) {
				g.setDate(g.getDate() + 1);
				b = g.getMonth() + 1;
				j = g.getDate();
				e.push(b + "月" + j)
			} else if (c == 2) {
				g.setDate(g.getDate() + 1);
				b = g.getMonth() + 1;
				j = g.getDate();
				e.push(b + "月" + j)
			} else if (c == 3) {
				g.setDate(g.getDate() + 1);
				b = g.getMonth() + 1;
				j = g.getDate();
				e.push(b + "月" + j)
			} else if (c == 4) {
				g.setDate(g.getDate() + 1);
				b = g.getMonth() + 1;
				j = g.getDate();
				e.push(b + "月" + j)
			} else if (c == 5) {
				g.setDate(g.getDate() + 1);
				b = g.getMonth() + 1;
				j = g.getDate();
				e.push(b + "月" + j)
			} else {
				g.setDate(g.getDate() + 1);
				b = g.getMonth() + 1;
				j = g.getDate();
				e.push(b + "月" + j)
			}
			j++
		}
		return e
	},
	run: function(f) {
		var c = this.marketgetTime();
		var e = "<div id='pickuptimeContener'><div class='pickuptime-close-empty'></div><div id='pickuptime'><div class='pickuptime-title fn-clear'><p class='pickuptime-close'>取消</p><p class='pickuptime-ok'>确定</p></div><div class='pickuptime-box'><b>选择日期</b><div class='pickuptime-data active'><p class='pickuptime-datap pickuptime-data-on'>今日</p><p class='pickuptime-datap'>明日</p><p class='pickuptime-datap'>后日</p><p class='pickuptime-datap'>" + c[3] + "日</p><p class='pickuptime-datap'>" + c[4] + "日</p><p class='pickuptime-datap'>" + c[5] + "日</p></div></div><div class='pickuptime-box'><b>选择时间</b><div class='pickuptime-time'><p class='pickuptime-datap'>7:00-9:00</p><p class='pickuptime-datap'>9:00-11:00</p><p class='pickuptime-datap'>11:00-13:00</p><p class='pickuptime-datap'>13:00-15:00</p><p class='pickuptime-datap'>15:00-17:00</p><p class='pickuptime-datap'>17:00-19:00</p></div></div></div></div>";
		if ($("#pickuptimeContener").length > 0) {
			$("#pickuptimeContener").remove()
		}
		$("body").append(e);
		$(".pickuptime-close-empty,.pickuptime-close").on("click",
		function() {
			$("#pickuptimeContener").remove()
		});
		$(".pickuptime-datap").on("click",
		function() {
			var g = $(this).index();
			$(this).addClass("pickuptime-data-on").siblings().removeClass("pickuptime-data-on");
			$(this).parent().addClass('active');
		});
		$(".pickuptime-ok").on("click",
		function() {
			if(!($(".pickuptime-time").hasClass('active'))){
                alert("请选择时间");
                return false
            }else{
				var date_text = $(".pickuptime-data .pickuptime-data-on").text();
				var dtime_text = $(".pickuptime-time .pickuptime-data-on").text();
				if(date_text == '今日'){
					date_text = c[0];
				}else if(date_text == '明日'){
					date_text = c[1];
				}else if(date_text == '后日'){
					date_text = c[2];
				}
				                var y = new Date().getFullYear();

				var m=date_text.replace('月', "-")
                var g = y + "-" + m.replace('日', "   ") +' '+ dtime_text;
            }
			$(".pickuptime-close-empty").click();
			if (Object.prototype.toString.call(f) === "[object Function]") {
				f(g);
				$("#pickuptimeContener").remove();
			} else {
				return false
			}
		})
	}
};